<!DOCTYPE html>
<html lang="es">

<%- include('../partials/head',{title:"Editar producto"})%>

<body>

    <%- include('./partials/header-admin')%>

    <main>
        <div class="products-edit-top">
            <h2>EDITAR PRODUCTO : <%= product.name %></h2>
        </div>
        <div class="products-edit-main">
            <div class="title-line"></div>

            <form action="/admin/products?_method=PUT" method="POST" class="products-edit-form" enctype="multipart/form-data">

                <div class="form-element">
                    <label for="name">Id:</label>
                    <input type="text" name="id" id="id" readonly value="<%= product.id %>">
                </div>

                <div class="form-element">
                    <label for="name">Nombre:</label>
                    <input type="text" name="name" id="name" placeholder="Ej: Reloj" required value="<%= product.name %>">
                </div>

                <div class="form-element">
                    <label for="description">Descripción:</label>
                    <textarea name="description" id="description" placeholder="Ej:" required><%= product.description %>"</textarea>
                </div>

                <h4>IMAGEN</h4>

                <div class="form-element-group">
                    <div class="flex-group">
                        <div>
                            <img src="<%='/img/products/' + product.image %>" alt="imágen del producto" srcset="" height=150>
                                <input type="file" name="image" accept="image/png, image/jpeg">
                            </div>
                    </div>
                </div>

                <div class="form-element">
                    <label for="sku">Código / SKU:</label>
                    <input type="text" class="control" name="sku" id="sku" value="<%= product.sku %>">
                </div>

                <div class="form-element">
                    <label for="price">Precio:</label>
                    <input type="number" name="price" id="price" required value="<%= product.price %>">
                </div>

                <div class="form-element">
                    <label for="discount">Descuento:</label>
                    <input type="number" name="discount" id="discount" value="<%= product.discount %>">
                </div>

                <div class="form-element">
                    <label for="categories"><h4>CATEGORÍAS</h4></label>
                    <select id="select-state" name="categories" multiple autocomplete="off">

                        <% for (let category of categories) {%>
                            <option value="<%=category.value%>"><%=category.category%></option>
                            <% } %>
    
                    </select>                    
                </div>

                    <div class="edit-buttons">
                    <button type="submit" class="form-button form-button-primary">GUARDAR</button>
                    <button type="reset" class="form-button form-button-secondary">RESTABLECER</button>
                    <a href="/admin/products" class="form-button form-button-secondary">CANCELAR</a>
                </div>
            </form>
        </div>
    </main>

    <%- include ('../partials/footer') %>
    <script src="/js/tom-select.complete.js"></script>
        
    <script>
        let categories = new TomSelect("#select-state",{
            plugins: {
        remove_button:{
            title:'Quitar este item',
        }
    },
    maxItems: 5
    });
    
    <% for (let cat of product.categories ) {%>
        categories.addItem("<%=cat%>");
    <%}%>

    </script>

</body>

</html>
